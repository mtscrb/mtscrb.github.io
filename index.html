<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>mtscrb</title>
  <style>
    body {
      display: flex;
      /* text-align: center; */
      /* font-size: 33px; */
      background-color:slategray;
    }
    #container {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    }

    .emoji-item {
      display: flex;
      flex-direction: row;
      border: 1px solid black;
    }
  </style>
</head>

<body>
  <div id="container"></div>

  <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script type="text/javascript" language="javascript" src="emojis.js"></script> 
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script type="text/babel">

    let randomEmojiList = [];
    setInterval(() => {
      const randomEmojiIndex = Math.floor(Math.random() * EMOJIS.length);
      const newEmoji = EMOJIS[randomEmojiIndex];
      const emojiDataIndex = randomEmojiList.findIndex(e => e.value === newEmoji);
      if (emojiDataIndex >= 0) {
        randomEmojiList[emojiDataIndex].counter++;
      } else {
        randomEmojiList = [...randomEmojiList, {
          value: newEmoji,
          counter: 1
        }]
      }
    }, 2);

    const EmojiItem = ({ value, counter }) => 
      <div className="emoji-item" style={{'font-size': `${16+(counter*5)}px`}}>
        <span>{value}</span>
        { counter > 1 ? 
            <span>{counter}</span> : null
        }
      </div>

    const RandomEmojiScreen = () => {
      const [emojiList, setEmojiList] = React.useState([]);

      React.useEffect(() => {
        setTimeout(() => {
          setEmojiList(randomEmojiList);
        }, 1000);
      }, [emojiList]);

      return (
        <React.Fragment>
          {emojiList.map(emojiData => <EmojiItem {...emojiData} />)}
        </React.Fragment>
      )
    }


    ReactDOM.render(
      <RandomEmojiScreen />,
      document.getElementById('container')
    );
  </script>

</body>

</html>